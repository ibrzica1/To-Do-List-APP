<!DOCTYPE html>
<html>
  <head>
    <title>Circular Progress Bar</title>
    <link rel="stylesheet" href="/style/progress-bar.css">
  </head>
  <body>

<div class="skill">
  <div class="outer">
    <div class="inner">
      <div id="number">
        
      </div>
    </div>
  </div>


  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="160px" height="160px">
         <defs>
            <linearGradient id="GradientColor">
               <stop offset="0%" stop-color="#e91e63" />
               <stop offset="100%" stop-color="#673ab7" />
            </linearGradient>
         </defs>
         <circle cx="80" cy="80" r="70" stroke-linecap="round" />
 </svg>
</div>

<script>

let number = document.getElementById("number");
let counter = 0;
let percentage = 99;

function dashoffset(perc){
  const circle = document.querySelector('circle');
  let offset = Math.floor(472 - (472 * (perc/100)));
  const style = document.createElement('style');
  style.innerHTML = `
    @keyframes anim {
      100% { stroke-dashoffset: ${offset}; }
    }
  `;
  document.head.appendChild(style);

  circle.style.animation = 'none';
  void circle.offsetWidth;
  circle.style.animation = 'anim 2s linear forwards';
}
dashoffset(percentage);


setInterval(() => {
  if(counter === percentage) {
    clearInterval();
  }
  else {
    counter += 1;
    number.innerHTML = counter + "%";
  }
  
}, 100-percentage)

</script>

  </body>
</html>